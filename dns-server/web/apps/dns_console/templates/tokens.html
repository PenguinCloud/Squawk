[[extend 'layout.html']]

<div class="card">
    <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
        <h2 class="card-title">Token Management</h2>
        <a href="[[=URL('tokens/new')]]" class="btn btn-success">Create New Token</a>
    </div>
    
    [[if tokens:]]
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Token Value</th>
                <th>Status</th>
                <th>Created</th>
                <th>Last Used</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            [[for token in tokens:]]
            <tr>
                <td><strong>[[=token.name]]</strong></td>
                <td>
                    <code style="background: #f4f4f4; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.875rem;">
                        [[=token.token[:20]]]...
                    </code>
                </td>
                <td>
                    [[if token.active:]]
                        <span class="badge badge-success">Active</span>
                    [[else:]]
                        <span class="badge badge-danger">Inactive</span>
                    [[pass]]
                </td>
                <td>[[=token.created_at.strftime('%Y-%m-%d') if token.created_at else 'N/A']]</td>
                <td>[[=token.last_used.strftime('%Y-%m-%d %H:%M') if token.last_used else 'Never']]</td>
                <td>
                    <a href="[[=URL('tokens/edit', token.id)]]" class="btn btn-sm">Edit</a>
                    <a href="[[=URL('tokens/delete', token.id)]]" class="btn btn-danger btn-sm" 
                       onclick="return confirm('Are you sure you want to delete this token?');">Delete</a>
                </td>
            </tr>
            [[pass]]
        </tbody>
    </table>
    [[else:]]
    <p>No tokens have been created yet. <a href="[[=URL('tokens/new')]]">Create your first token</a>.</p>
    [[pass]]
</div>